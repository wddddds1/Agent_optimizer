version: 2
input_edit_allowlist: []
forbid_env:
  OMP_DYNAMIC:
    - "true"
    - "1"
    - "on"

global_rules:
  - id: single_action_only
    description: "Exactly one action per experiment for attribution."
    rule: "single_action_only"
  - id: no_mixed_targets
    description: "Do not change runtime/env and input_script in the same experiment."
    rule: "no_mixed_targets"
  - id: require_correctness_for_input_edits
    description: "Input-script edits require correctness gate."
    rule: "require_correctness_for_input_edits"
  - id: forbid_rng_or_integrator_changes
    description: "Do not modify RNG seeds or integrator time steps."
    rule: "forbid_rng_or_integrator_changes"
  - id: no_multiple_medium_high_risk
    description: "Do not combine medium/high risk actions in one experiment."
    rule: "no_multiple_medium_high_risk"

conditional_rules: []

profiling_rules:
  low_confidence_allow:
    applies_to: ["run_config"]
    risk_levels: ["low"]
  unknown_confidence_allow:
    applies_to: ["run_config"]
    risk_levels: ["low"]

source_patch_scope:
  start_level: "hotspot"
  levels: ["hotspot", "module", "global"]
  promote:
    no_gain_iters: 2
    no_candidates_iters: 1
    patch_failures: 2
  coverage:
    require_all_families: true
